@model CreaturesViewModel
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
@using (Html.BeginForm())
{
	//Kanka Buradaki Dropdownlistler normal biz search filter dropdown list olmasını arzuluyoruz.
									<!-- Upper Realm Combobox -->
									<div class="form-group">
        <label for="UpperRealmName">Select Upper Realm</label>
        @Html.DropDownListFor(m => m.UpperRealmName, Model.UpperRealmNamed, "Select Upper Realm", new { @class = "form-control" })                
    </div>
    <br>

    <!-- Kingdom Combobox -->
       <div class="form-group">
        <label for="KingdomName">Select Kingdom</label>
        @Html.DropDownListFor(m => m.KingdomName, Model.KingdomNamed, "Select Kingdom", new { @class = "form-control", id = "KingdomDropdown" })
    </div>
    <br>

    <!-- Phylum Combobox (Başlangıçta gizli) -->
    <div id="PhylumSection" style="display: none;">
        <div class="form-group">
            <label for="PhylumName">Select Phylum</label>
            @Html.DropDownListFor(m => m.PhylumName, Model.PhylumNamed, "Select Phylum", new { @class = "form-control", id = "PhylumDropdown" })
            <button type="button" class="btn btn-primary" id="add-new-phylum-btn" data-bs-toggle="modal" data-bs-target="#AddPhylumModal">
                Add New
            </button>
        </div>
    </div>
    <br>

    <!-- Class Combobox -->
    <div class="form-group">
        <label for="ClassName">Select Class</label>
        @Html.DropDownListFor(m => m.ClassName, Model.ClassNamed, "Select Class", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-class-btn">Add New</button>
    </div>
    <br>

    <!-- Order Combobox -->
    <div class="form-group">
        <label for="OrderName">Select Order</label>
        @Html.DropDownListFor(m => m.OrderName, Model.OrderNamed, "Select Order", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-order-btn">Add New</button>					
    </div>
    <br>

    <!-- Family Combobox -->
    <div class="form-group">
        <label for="FamilyName">Select Family</label>
        @Html.DropDownListFor(m => m.FamilyName, Model.FamilyNamed, "Select Family", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-family-btn">Add New</button>				
    </div>
    <br>

    <!-- Genus Combobox -->
    <div class="form-group">
        <label for="GenusName">Select Genus</label>
        @Html.DropDownListFor(m => m.GenusName, Model.GenusNamed, "Select Genus", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-genus-btn">Add New</button>						
    </div>
    <br>

    <!-- Species Combobox -->
    <div class="form-group">
        <label for="SpeciesName">Select Species</label>
        @Html.DropDownListFor(m => m.SpeciesName, Model.SpeciesNamed, "Select Species", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-species-btn">Add New</button>						
    </div>
    <br>

    <!-- Subspecies Combobox -->
    <div class="form-group">
        <label for="SubspeciesName">Select Subspecies</label>
        @Html.DropDownListFor(m => m.SubspeciesName, Model.SubspeciesNamed, "Select Subspecies", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-supspecies-btn">Add New</button>						
    </div>
    <br>

    <!-- IUCN Combobox -->
    <div class="form-group">
        <label for="IucnCode">Select IUCN</label>
        @Html.DropDownListFor(m => m.IucnCode, Model.IucnCoded, "Select IUCN", new { @class = "form-control" })
    </div>
    <br>

    <!-- Author Combobox -->
    <div class="form-group">
        <label for="AuthorName">Select Author</label>
        @Html.DropDownListFor(m => m.AuthorName, Model.AuthorNamed, "Select Author", new { @class = "form-control" })
        <button type="button" class="btn btn-primary" id="add-new-kingdom-btn">Add New</button>						
    </div>
    <br>

    <div class="form-group">
        <label for="Common Name">Enter Common Name</label>
        @Html.TextBoxFor(m => m.CommonName, new { @class = "form-control" })
    </div>
    <br>

    <div class="form-group">
        <label for="Scientific Name">Enter Common Name</label>
        @Html.TextBoxFor(m => m.ScientificName, new { @class = "form-control" })
    </div>
    <br>

    <button type="submit" class="btn btn-primary">Submit</button>

    <!-- Modal for Phylum -->
       <div class="modal fade" id="AddPhylumModal" tabindex="-1" aria-labelledby="AddPhylumModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="AddPhylumModalLabel">Add New Phylum</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="AddPhylumForm" method="post" action="/Phylum/Add">
                    <div class="modal-body">
                        <input type="hidden" id="SelectedKingdomID" name="KingdomID">

                        <label for="ScientificName">Scientific Name:</label>
                        <input type="text" id="ScientificName" name="ScientificName" class="form-control" required>

                        <label for="CommonName">Common Name:</label>
                        <input type="text" id="CommonName" name="CommonName" class="form-control" required>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


<script>
          // Phylum Dropdown'da Kingdom seçildiğinde Phylumları yükleyip modal'ı açma
    document.getElementById('KingdomDropdown').addEventListener('change', function () {
        const kingdomID = this.value;
        const phylumSection = document.getElementById('PhylumSection');
        const selectedKingdomID = document.getElementById('SelectedKingdomID');

        if (kingdomID) {
            phylumSection.style.display = 'block';
            selectedKingdomID.value = kingdomID;

            // AJAX ile Phylumları yükle
            fetch(`/Phylum/GetByKingdom?kingdomID=${kingdomID}`)
                .then(response => response.json())
                .then(data => {
                    const phylumDropdown = document.getElementById('PhylumDropdown');
                    phylumDropdown.innerHTML = '<option value="">Select Phylum</option>';
                    data.forEach(phylum => {
                        phylumDropdown.innerHTML += `<option value="${phylum.PhylumID}">${phylum.Name}</option>`;
                    });
                });

            // Modal'ı aç
            const addNewPhylumBtn = document.getElementById('add-new-phylum-btn');
            addNewPhylumBtn.addEventListener('click', function () {
                $('#AddPhylumModal').modal('show');
            });
        } else {
            phylumSection.style.display = 'none';
        }
    });
    // Add similar blocks for Phylum, Class, Order, Family, Genus, Species, Subspecies, IUCN, and Author
</script>
}